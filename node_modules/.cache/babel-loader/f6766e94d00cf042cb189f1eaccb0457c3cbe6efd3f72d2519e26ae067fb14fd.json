{"ast":null,"code":"import React from\"react\";import\"./CartItem.css\";import{useContext,useState}from\"react\";import{ShopContext}from\"../../Context/ShopContext\";import remove_icon from\"../Asset/cart_cross_icon.png\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const CartItem=()=>{const{getTotalCart,all_product,cartItems,removeFromCart,applyPromo,promoApplied,discount,getTotalCartPromote}=useContext(ShopContext);const[promoCode,setPromoCode]=useState(\"\");const handlePromoCodeChange=event=>{setPromoCode(event.target.value);};const handleApplyPromoCode=()=>{applyPromo(promoCode);};// const applyPromoCode = () => {\n//   fetch(\"http://localhost:4000/checkpromocode\", {\n//     method: \"POST\",\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//     },\n//     body: JSON.stringify({ promoCode }),\n//   })\n//     .then((resp) => resp.json())\n//     .then((data) => {\n//       if (data.success) {\n//         setPromoApplied(true);\n//         setPromoError(\"\");\n//         setDiscount(data.discount);\n//         alert(\"Mã giảm giá hợp lệ\");\n//       } else {\n//         setPromoError(data.message);\n//         setPromoApplied(false);\n//         setDiscount(0);\n//         alert(\"Mã giảm giá không hợp lệ hoặc hết hạn\");\n//       }\n//     });\n// };\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"cartitems\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart_title\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"GI\\u1ECE H\\xC0NG\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartitems-main\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"S\\u1EA3n ph\\u1EA9m\"}),/*#__PURE__*/_jsx(\"p\",{children:\"T\\xEAn\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Gi\\xE1\"}),/*#__PURE__*/_jsx(\"p\",{children:\"S\\u1ED1 l\\u01B0\\u1EE3ng\"}),/*#__PURE__*/_jsx(\"p\",{children:\"T\\u1ED5ng c\\u1ED9ng\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Xo\\xE1 kh\\u1ECFi gi\\u1ECF h\\xE0ng\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),all_product.map(e=>{if(cartItems[e.id]>0){let parseNewPrice=parseInt(e.new_price.replace(/[^\\d]/g,\"\"));return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cartitems-format cartitems-main\",children:[/*#__PURE__*/_jsx(\"img\",{src:e.image,alt:\"\",className:\"carticon-product-icon\"}),/*#__PURE__*/_jsx(\"p\",{children:e.name}),/*#__PURE__*/_jsx(\"p\",{children:e.new_price}),/*#__PURE__*/_jsx(\"button\",{className:\"cartItem-quantity\",children:cartItems[e.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[(parseNewPrice*cartItems[e.id]).toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g,\".\"),\" \",\"\\u20AB\"]}),/*#__PURE__*/_jsx(\"img\",{className:\"cartItem-remove-icon\",src:remove_icon,onClick:()=>{removeFromCart(e.id);},alt:\"\"})]}),/*#__PURE__*/_jsx(\"hr\",{})]});}return null;}),/*#__PURE__*/_jsx(\"div\",{className:\"cartItems-bottom\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cartItems-total\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"T\\u1ED5ng ti\\u1EC1n: \"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"cartItem-total-item\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"T\\u1ED5ng ti\\u1EC1n s\\u1EA3n ph\\u1EA9m:\"}),promoApplied?/*#__PURE__*/_jsxs(\"p\",{style:{textDecoration:\"line-through\"},children:[getTotalCart(),\" \\u20AB\"]}):/*#__PURE__*/_jsxs(\"p\",{children:[getTotalCart(),\" \\u20AB\"]})]}),promoApplied&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartItem-total-item\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Gi\\xE1 sau khi \\xE1p d\\u1EE5ng khuy\\u1EBFn m\\xE3i:\"}),/*#__PURE__*/_jsxs(\"p\",{children:[getTotalCartPromote(),\" \\u20AB\"]})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartItem-total-item\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Ph\\xED v\\u1EADn chuy\\u1EC3n:\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Mi\\u1EC5n ph\\xED\"})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartItem-total-item\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"T\\u1ED5ng c\\u1ED9ng:\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[promoApplied?getTotalCartPromote():getTotalCart(),\" \\u20AB\"]})]}),/*#__PURE__*/_jsx(Link,{to:\"/cart/checkout\",children:/*#__PURE__*/_jsx(\"button\",{className:\"confirm_btn\",children:\"X\\xC1C NH\\u1EACN \\u0110\\u01A0N H\\xC0NG\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartItems-promocode\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"N\\u1EBFu b\\u1EA1n c\\xF3 m\\xE3 khuy\\u1EBFn m\\xE3i, vui l\\xF2ng nh\\u1EADp t\\u1EA1i \\u0111\\xE2y:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"cartItems-promoteContainer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"M\\xE3 khuy\\u1EBFn m\\xE3i\",value:promoCode,onChange:handlePromoCodeChange}),/*#__PURE__*/_jsx(\"button\",{className:\"promote_code\",onClick:handleApplyPromoCode,children:\"\\xC1p d\\u1EE5ng\"})]})]})]})})]});};export default CartItem;","map":{"version":3,"names":["React","useContext","useState","ShopContext","remove_icon","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CartItem","getTotalCart","all_product","cartItems","removeFromCart","applyPromo","promoApplied","discount","getTotalCartPromote","promoCode","setPromoCode","handlePromoCodeChange","event","target","value","handleApplyPromoCode","className","children","map","e","id","parseNewPrice","parseInt","new_price","replace","src","image","alt","name","toString","onClick","style","textDecoration","to","type","placeholder","onChange"],"sources":["C:/Users/kieut/OneDrive/Desktop/Source/FrontEnd/src/Component/CartItems/CartItem.jsx"],"sourcesContent":["import React from \"react\";\r\nimport \"./CartItem.css\";\r\nimport { useContext, useState } from \"react\";\r\nimport { ShopContext } from \"../../Context/ShopContext\";\r\nimport remove_icon from \"../Asset/cart_cross_icon.png\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst CartItem = () => {\r\n  const {\r\n    getTotalCart,\r\n    all_product,\r\n    cartItems,\r\n    removeFromCart,\r\n    applyPromo,\r\n    promoApplied,\r\n    discount,\r\n    getTotalCartPromote,\r\n  } = useContext(ShopContext);\r\n  const [promoCode, setPromoCode] = useState(\"\");\r\n\r\n  const handlePromoCodeChange = (event) => {\r\n    setPromoCode(event.target.value);\r\n  };\r\n\r\n  const handleApplyPromoCode = () => {\r\n    applyPromo(promoCode);\r\n  };\r\n\r\n  // const applyPromoCode = () => {\r\n  //   fetch(\"http://localhost:4000/checkpromocode\", {\r\n  //     method: \"POST\",\r\n  //     headers: {\r\n  //       \"Content-Type\": \"application/json\",\r\n  //     },\r\n  //     body: JSON.stringify({ promoCode }),\r\n  //   })\r\n  //     .then((resp) => resp.json())\r\n  //     .then((data) => {\r\n  //       if (data.success) {\r\n  //         setPromoApplied(true);\r\n  //         setPromoError(\"\");\r\n  //         setDiscount(data.discount);\r\n  //         alert(\"Mã giảm giá hợp lệ\");\r\n  //       } else {\r\n  //         setPromoError(data.message);\r\n  //         setPromoApplied(false);\r\n  //         setDiscount(0);\r\n  //         alert(\"Mã giảm giá không hợp lệ hoặc hết hạn\");\r\n  //       }\r\n  //     });\r\n  // };\r\n\r\n  return (\r\n    <div className=\"cartitems\">\r\n      <div className=\"cart_title\">\r\n        <h1>GIỎ HÀNG</h1>\r\n      </div>\r\n      <div className=\"cartitems-main\">\r\n        <p>Sản phẩm</p>\r\n        <p>Tên</p>\r\n        <p>Giá</p>\r\n        <p>Số lượng</p>\r\n        <p>Tổng cộng</p>\r\n        <p>Xoá khỏi giỏ hàng</p>\r\n      </div>\r\n      <hr />\r\n      {all_product.map((e) => {\r\n        if (cartItems[e.id] > 0) {\r\n          let parseNewPrice = parseInt(e.new_price.replace(/[^\\d]/g, \"\"));\r\n          return (\r\n            <div>\r\n              <div className=\"cartitems-format cartitems-main\">\r\n                <img src={e.image} alt=\"\" className=\"carticon-product-icon\" />\r\n                <p>{e.name}</p>\r\n                <p>{e.new_price}</p>\r\n                <button className=\"cartItem-quantity\">{cartItems[e.id]}</button>\r\n                <p>\r\n                  {(parseNewPrice * cartItems[e.id])\r\n                    .toString()\r\n                    .replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\")}{\" \"}\r\n                  ₫\r\n                </p>\r\n                <img\r\n                  className=\"cartItem-remove-icon\"\r\n                  src={remove_icon}\r\n                  onClick={() => {\r\n                    removeFromCart(e.id);\r\n                  }}\r\n                  alt=\"\"\r\n                />\r\n              </div>\r\n              <hr />\r\n            </div>\r\n          );\r\n        }\r\n        return null;\r\n      })}\r\n      <div className=\"cartItems-bottom\">\r\n        <div className=\"cartItems-total\">\r\n          <h1>Tổng tiền: </h1>\r\n          <div>\r\n            <div className=\"cartItem-total-item\">\r\n              <p>Tổng tiền sản phẩm:</p>\r\n              {promoApplied ? (\r\n                <p style={{ textDecoration: \"line-through\" }}>\r\n                  {getTotalCart()} ₫\r\n                </p>\r\n              ) : (\r\n                <p>{getTotalCart()} ₫</p>\r\n              )}\r\n            </div>\r\n            {promoApplied && (\r\n              <>\r\n                <hr />\r\n                <div className=\"cartItem-total-item\">\r\n                  <p>Giá sau khi áp dụng khuyến mãi:</p>\r\n                  <p>{getTotalCartPromote()} ₫</p>\r\n                </div>\r\n              </>\r\n            )}\r\n            <hr />\r\n            <div className=\"cartItem-total-item\">\r\n              <p>Phí vận chuyển:</p>\r\n              <p>Miễn phí</p>\r\n            </div>\r\n            <hr />\r\n            <div className=\"cartItem-total-item\">\r\n              <h3>Tổng cộng:</h3>\r\n              <h3>{promoApplied ? getTotalCartPromote() : getTotalCart()} ₫</h3>\r\n            </div>\r\n            <Link to=\"/cart/checkout\">\r\n              <button className=\"confirm_btn\">XÁC NHẬN ĐƠN HÀNG</button>\r\n            </Link>\r\n          </div>\r\n          <div className=\"cartItems-promocode\">\r\n            <p>Nếu bạn có mã khuyến mãi, vui lòng nhập tại đây:</p>\r\n            <div className=\"cartItems-promoteContainer\">\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Mã khuyến mãi\"\r\n                value={promoCode}\r\n                onChange={handlePromoCodeChange}\r\n              />\r\n              <button className=\"promote_code\" onClick={handleApplyPromoCode}>\r\n                Áp dụng\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartItem;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}